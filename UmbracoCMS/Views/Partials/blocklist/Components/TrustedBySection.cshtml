@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockListItem>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;

@{
    var content = (ContentModels.TrustedBySection)Model.Content;
    var rating = Math.Clamp(content.TrustedRating, 0, 5);

    var photo = content.TrustedImage;
    var photoUrl = photo?.Url();
    var alt = !string.IsNullOrWhiteSpace(photo?.Name) ? photo!.Name : "Client image";
}

<section class="relative bg-white-100 overflow-hidden">
    @if (!string.IsNullOrWhiteSpace(photoUrl))
    {
        <div class="absolute top-0 right-0 w-[894px] h-[511px] translate-x-[80px]">
            <img src="@photoUrl" alt="@alt" class="block w-full h-full object-cover" />
        </div>
    }

    <div class="max-w-7xl mx-auto">
        <div class="min-h-[511px] flex items-center">
            <div class="px-6 md:px-8 lg:px-10 max-w-[450px]">
                @if (!string.IsNullOrWhiteSpace(content.TrustedKicker))
                {
                    <p class="text-[14px] tracking-[0.15em] font-bold uppercase text-secondary mb-3">
                        @content.TrustedKicker
                    </p>
                }

                @if (!string.IsNullOrWhiteSpace(content.TrustedTitle))
                {
                    <h2 class="text-primary text-[28px] md:text-[40px] font-extrabold leading-tight mb-4">
                        @content.TrustedTitle
                    </h2>
                }

                <div class="rte prose max-w-none text-body-text mb-6">
                    @content.TrustedBody
                </div>

                <!-- ChatGPT hjälpte mig med att generera stjärnorna för följande kod kod som ligger innanför nästa div. -->
                <div class="flex items-center gap-1 mb-4" aria-label="@($"{rating} out of 5 stars")" role="img">
                    @for (var i = 0; i < 5; i++)
                    {
                        var cls = i < rating ? "text-primary" : "text-body-text";
                        <svg class="w-4 h-4 @cls" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.802 2.036a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.802-2.036a1 1 0 00-1.176 0l-2.802 2.036c-.784.57-1.84-.197-1.54-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.88 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                    }
                </div>

                @if (!string.IsNullOrWhiteSpace(content.TrustedAuthorName) || !string.IsNullOrWhiteSpace(content.TrustedAuthorCompany))
                {
                    <p class="text-body-text">
                        <span class="text-[14px]">@content.TrustedAuthorName</span><br />
                        <span class="text-[20px] italic">@content.TrustedAuthorCompany</span>
                    </p>
                }
            </div>
        </div>
    </div>
</section>
